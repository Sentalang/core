<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bézier - Sentalang Core Specification</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../roadmap.html">Roadmap</a></li><li class="chapter-item expanded affix "><li class="part-title">Concepts</li><li class="chapter-item expanded "><a href="../concepts/json.html"><strong aria-hidden="true">1.</strong> JSON</a></li><li class="chapter-item expanded "><a href="../concepts/primitives.html"><strong aria-hidden="true">2.</strong> Primitives</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/fractions.html"><strong aria-hidden="true">2.1.</strong> Fractions</a></li><li class="chapter-item expanded "><a href="../concepts/bezier.html" class="active"><strong aria-hidden="true">2.2.</strong> Bézier</a></li></ol></li><li class="chapter-item expanded "><a href="../concepts/time.html"><strong aria-hidden="true">3.</strong> Time</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/time_basics.html"><strong aria-hidden="true">3.1.</strong> Basics</a></li><li class="chapter-item expanded "><a href="../concepts/bpm_offset.html"><strong aria-hidden="true">3.2.</strong> BPM and Offsets</a></li></ol></li><li class="chapter-item expanded "><a href="../concepts/events.html"><strong aria-hidden="true">4.</strong> Events</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/group_named_events.html"><strong aria-hidden="true">4.1.</strong> Groups and named events</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Format</li><li class="chapter-item expanded "><a href="../format/header.html"><strong aria-hidden="true">5.</strong> Header</a></li><li class="chapter-item expanded "><a href="../format/files.html"><strong aria-hidden="true">6.</strong> Files</a></li><li class="chapter-item expanded "><a href="../format/chart_organization.html"><strong aria-hidden="true">7.</strong> Chart organization</a></li><li class="chapter-item expanded "><a href="../format/chart_metadata.html"><strong aria-hidden="true">8.</strong> Chart metadata</a></li><li class="chapter-item expanded affix "><li class="part-title">Extensions</li><li class="chapter-item expanded "><a href="../extensions/game_specifications.html"><strong aria-hidden="true">9.</strong> Game specifications</a></li><li class="chapter-item expanded "><a href="../extensions/extensions.html"><strong aria-hidden="true">10.</strong> Extensions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Sentalang Core Specification</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="bézier"><a class="header" href="#bézier">Bézier</a></h1>
<p>Defining values on different time/location are what's only needed for discrete and linear values. However, for more complex curves we'd have to rely on bézier curves to represent it. Which is why Sentalang provides cubic Bézier curves to solve such problems.</p>
<p>Declaring a cubic Bézier curve is as simple as making an object that contains an ordered array. The format is inspired by how Bodymovin/Lottie handles bézier control points but with changes on how points are stored.</p>
<p>Control points are grouped into 3, which we'll call Control Point Group (CPG):</p>
<ul>
<li><strong>Vertex</strong> - The curve passes through this control point (Required)</li>
<li><strong>In</strong> - Controls the shape of the curve going to the vertex (Optional, defaults to the same point as vertex. )</li>
<li><strong>Out</strong> - Controls the shape of the curve going away from the vertex (Optional. Defaults to the same point as vertex)</li>
</ul>
<p>All points must have the same dimensions and all coordinate must be an integer, float, or a fraction.</p>
<p>There should be at least 2 CPGs declared to form a curve. Cubic bézier segments are formed from two CPGs by taking the vertex and out control points from the first CPG, and the in and vertex control points from the second CPG.</p>
<p>We can visualize how a cubic Bézier segment is formed from two CPGs with the help of the illustration below:</p>
<ul>
<li>P<sub>0</sub>: First CPG's vertex point</li>
<li>P<sub>1</sub>: First CPG's out point</li>
<li>P<sub>2</sub>: Second CPG's in point</li>
<li>P<sub>3</sub>: Second CPG's vertex point</li>
</ul>
<p>![[bezier.png]]
<em>By MarianSigler - Self-drawn using gedit, based on Bezier.png, Public Domain,</em> https://commons.wikimedia.org/w/index.php?curid=780454</p>
<p>Given <strong>N</strong> CPGs, there are in total <strong>N-1</strong> cubic bézier segments. Segments are formed by taking 2 consecutive CPGs in an overlapping window. The order of CPGs in the array is important as it defines how the segments are defined. To form a closed shape, the vertex points of both the first and last CPGs in the array must be equal.</p>
<p>For example, we have 4 CPGs: A, B, C, and D. We would have 3 cubic bézier segments:</p>
<ol>
<li>Segment 1: CPGs A and B</li>
<li>Segment 2: CPGs B and C</li>
<li>Segment 3: CPGs C and D</li>
</ol>
<p>Along with defining the CPGs, the dimensions must also be defined. Dimensions are defined using an array of strings, and must have a length equal to the number of dimensions of all points in all CPGs. </p>
<p>Dimensions also provide a way to give hints on how to interpret the values listed in points. Like whether to convert a value to a rectilinear form in the case where points are stored in polar coordinates. Parsers must consult with a game mode specification on these matters.</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>An approximation of an open half circle in a cartesian plane:</p>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [-1, 0], &quot;out&quot;: [-1, 0.55]},
        {&quot;vertex&quot;: [0, 1], &quot;in&quot;: [-0.55, 1], &quot;out&quot;: [0.55, 1]},
        {&quot;vertex&quot;: [1, 0], &quot;in&quot;: [1, 0.55]},
    ]
}
</code></pre>
<p>A closed triangle with straight edges in a cartesian plane. <code>out</code> and <code>in</code> aren't defined in this example, meaning that they implicitly have the same value as <code>vertex</code>.</p>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0]},
        {&quot;vertex&quot;: [1, 1]},
        {&quot;vertex&quot;: [2, 0]},
        {&quot;vertex&quot;: [0, 0]}
    ]
}
</code></pre>
<p>For this example, let's make a hypothetical slide note in a fictional VSRG, where 0 is left-most and 1 is right-most. We want the slide to look like a sigmoid (or an <em>ease-in-out</em> curve for those who use bézier for transitions in CSS and After Effects). This has some fields that are yet to be discussed in <a href="events.html">events</a> but for now let's just focus on how a slide note with a bézier curve would look.</p>
<pre><code class="language-json">{
	&quot;kind&quot;: &quot;SLIDE&quot;,
	&quot;beat&quot;: [25, 1, 2],
	&quot;duration&quot;: [3, 1, 2],
	&quot;input&quot;: {
		&quot;dimensions&quot;: [&quot;beat&quot;, &quot;lane&quot;],
		&quot;points&quot;: [
			{&quot;vertex&quot;: [[25, 1, 2], 0.1], &quot;out&quot;: [[25, 1, 2], 0.5]},
			{&quot;vertex&quot;: [[29], 0.9], &quot;in&quot;: [[29], 0.5]}
		]
	}
}
</code></pre>
<h2 id="invalid-examples"><a class="header" href="#invalid-examples">Invalid Examples</a></h2>
<ul>
<li>Inconsistent number of dimensions</li>
</ul>
<pre><code class="language-json">{
	&quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
	&quot;points&quot;: [
		{&quot;vertex&quot;: [3, 1], &quot;out&quot;: [5, 2, 3]},
		{&quot;vertex&quot;: [12, 5.2], &quot;in&quot;: [12.5, 8]}
	]
}
</code></pre>
<p><strong>TODO:</strong> Add more valid and invalid examples</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../concepts/fractions.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../concepts/time.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../concepts/fractions.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../concepts/time.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
