<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bézier - Sentalang Core Specification</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../roadmap.html">Roadmap</a></li><li class="chapter-item expanded affix "><li class="part-title">Concepts</li><li class="chapter-item expanded "><a href="../concepts/json.html"><strong aria-hidden="true">1.</strong> JSON</a></li><li class="chapter-item expanded "><a href="../concepts/primitives.html"><strong aria-hidden="true">2.</strong> Primitives</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/fractions.html"><strong aria-hidden="true">2.1.</strong> Fractions</a></li><li class="chapter-item expanded "><a href="../concepts/bezier.html" class="active"><strong aria-hidden="true">2.2.</strong> Bézier</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Time</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Basics</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> BPM and Offsets</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Events</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> Groups and named events</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Format</li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Header</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Files</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Chart organization</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Chart metadata</div></li><li class="chapter-item expanded affix "><li class="part-title">Extensions</li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Game specifications</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Extensions</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Sentalang Core Specification</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="bézier-curves"><a class="header" href="#bézier-curves">Bézier Curves</a></h1>
<p>Discrete and linear curves/functions can be modeled by specifying values at different times and locations. However, for more complex curves/functions, we need to use cubic Bézier curves. In Sentalang, cubic Bézier curves are represented with an ordered array inspired by Bodymovin/Lottie's handling of Bézier control points, with modifications to point storage.</p>
<p>Control points are organized into groups of three, called Control Point Groups (CPGs):</p>
<ul>
<li><strong>Vertex</strong> - The curve passes through this control point (Required)</li>
<li><strong>In</strong> - Controls the shape of the curve going towards the vertex (Optional; defaults to the same point as vertex)</li>
<li><strong>Out</strong> - Controls the shape of the curve moving away from the vertex (Optional; defaults to the same point as vertex)</li>
</ul>
<p>All points within a CPG must have the same dimensions, and coordinates can be integers, floats, or fractions.</p>
<p>At least two CPGs must be declared to form a curve. Cubic Bézier segments are created from two CPGs by using the vertex and out control points from the first CPG, and the in and vertex control points from the second CPG.</p>
<p>To visualize how a cubic Bézier segment is formed from two CPGs, consider the following illustration:</p>
<ul>
<li>P<sub>0</sub>: First CPG's vertex point</li>
<li>P<sub>1</sub>: First CPG's out point</li>
<li>P<sub>2</sub>: Second CPG's in point</li>
<li>P<sub>3</sub>: Second CPG's vertex point</li>
</ul>
<p><img src="./media/bezier.png" alt="Image of a cubic bézier curve with the four control points visible" />
<em>By MarianSigler - Self-drawn using gedit, based on Bezier.png, Public Domain,</em> https://commons.wikimedia.org/w/index.php?curid=780454</p>
<p>Given <strong>N</strong> CPGs, there are <strong>N-1</strong> cubic Bézier segments in total. Segments are formed by taking two consecutive CPGs in an overlapping manner. The order of CPGs in the array is crucial, as it determines how segments are defined. To create a closed shape, the vertex points of the first and last CPGs in the array must be equal.</p>
<p>For instance, given the following array of four CPGs (A, B, C, and D):</p>
<pre><code class="language-json">[
    // CPG A
    {
        &quot;vertex&quot;: [0, 0],
        &quot;out&quot;: [1, 1]
    },
    // CPG B
    {
        &quot;vertex&quot;: [2, 2],
        &quot;in&quot;: [1, 3],
        &quot;out&quot;: [3, 3]
    },
    // CPG C
    {
        &quot;vertex&quot;: [4, 2],
        &quot;in&quot;: [3, 1],
        &quot;out&quot;: [5, 1]
    },
    // CPG D
    {
        &quot;vertex&quot;: [6, 0],
        &quot;in&quot;: [5, -1]
    }
]

</code></pre>
<p>Three cubic Bézier segments are formed:</p>
<ol>
<li>Segment 1 (formed from CPGs A and B):
<ul>
<li>P<sub>0</sub>: <code>[0, 0]</code> (vertex of CPG A)</li>
<li>P<sub>1</sub>: <code>[1, 1]</code> (out of CPG A)</li>
<li>P<sub>2</sub>: <code>[1, 3]</code> (in of CPG B)</li>
<li>P<sub>3</sub>: <code>[2, 2]</code> (vertex of CPG B)</li>
</ul>
</li>
<li>Segment 2 (formed from CPGs B and C):
<ul>
<li>P<sub>0</sub>: <code>[2, 2]</code> (vertex of CPG B)</li>
<li>P<sub>1</sub>: <code>[3, 3]</code> (out of CPG B)</li>
<li>P<sub>2</sub>: <code>[3, 1]</code> (in of CPG C)</li>
<li>P<sub>3</sub>: <code>[4, 2]</code> (vertex of CPG C)</li>
</ul>
</li>
<li>Segment 3 (formed from CPGs C and D):
<ul>
<li>P<sub>0</sub>: <code>[4, 2]</code> (vertex of CPG C)</li>
<li>P<sub>1</sub>: <code>[5, 1]</code> (out of CPG C)</li>
<li>P<sub>2</sub>: <code>[5, -1]</code> (in of CPG D)</li>
<li>P<sub>3</sub>: <code>[6, 0]</code> (vertex of CPG D)</li>
</ul>
</li>
</ol>
<p>Dimensions must also be defined for the CPGs. Dimensions are specified using an array of strings, with the length of the array equal to the number of dimensions for all points in all CPGs.</p>
<p>Dimensions serve as a means of providing hints on how to interpret values in points, such as converting a value to rectilinear form when points are stored in polar coordinates. Parsers must consult the game mode specification for guidance on these matters.</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>An approximation of an open half circle in a cartesian plane:</p>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [-1, 0], &quot;out&quot;: [-1, 0.55]},
        {&quot;vertex&quot;: [0, 1], &quot;in&quot;: [-0.55, 1], &quot;out&quot;: [0.55, 1]},
        {&quot;vertex&quot;: [1, 0], &quot;in&quot;: [1, 0.55]},
    ]
}
</code></pre>
<p><img src="./media/half_circle.svg" alt="Image of the half circle from the example above" /></p>
<p>A closed triangle with straight edges in a Cartesian plane (note that <code>out</code> and <code>in</code> are not defined, implying that they have the same value as <code>vertex</code>):</p>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0]},
        {&quot;vertex&quot;: [1, 1]},
        {&quot;vertex&quot;: [2, 0]},
        {&quot;vertex&quot;: [0, 0]}
    ]
}
</code></pre>
<p><img src="./media/triangle.svg" alt="Image of the triangle from the example above" /></p>
<p>An S-shaped curve in a Cartesian plane:</p>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0], &quot;out&quot;: [1, 2]},
        {&quot;vertex&quot;: [3, 4], &quot;in&quot;: [2, 6], &quot;out&quot;: [4, 6]},
        {&quot;vertex&quot;: [6, 4], &quot;in&quot;: [5, 2]}
    ]
}
</code></pre>
<p>A zigzag path in a 3D Cartesian space:</p>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0, 0]},
        {&quot;vertex&quot;: [1, 1, 1]},
        {&quot;vertex&quot;: [2, 0, 2]},
        {&quot;vertex&quot;: [3, 1, 3]},
        {&quot;vertex&quot;: [4, 0, 4]}
    ]
}
</code></pre>
<p>In this example, we create a hypothetical slide note in a fictional Vertical Scrolling Rhythm Game (VSRG), where 0 is the left-most and 1 is the right-most position. We want the slide to resemble a sigmoid curve (or an <em>ease-in-out</em> curve, as used in CSS and After Effects Bézier transitions). This example includes some fields that will be discussed later in <a href="./events.html">events</a>, but for now, let's focus on the appearance of a slide note with a Bézier curve:</p>
<pre><code class="language-json">{
	&quot;kind&quot;: &quot;SLIDE&quot;,
	&quot;beat&quot;: [25, 1, 2],
	&quot;duration&quot;: [3, 1, 2],
	&quot;input&quot;: {
		&quot;dimensions&quot;: [&quot;beat&quot;, &quot;lane&quot;],
		&quot;points&quot;: [
			{&quot;vertex&quot;: [[0], 0.1], &quot;out&quot;: [[0], 0.5]},
			{&quot;vertex&quot;: [[3, 1, 2], 0.9], &quot;in&quot;: [[3, 1, 2], 0.5]}
		]
	}
}
</code></pre>
<p>In this example, the zigzag slide starts at the left-most lane (lane 0) at beat 0. The pattern then moves to the right-most lane (lane 1) at beat 1, back to the left-most lane at beat 2, and so on. The pattern ends at the left-most lane at beat 4.:</p>
<pre><code class="language-json">{
	&quot;kind&quot;: &quot;SLIDE&quot;,
	&quot;beat&quot;: [10],
	&quot;duration&quot;: [4],
	&quot;input&quot;: {
	    &quot;dimensions&quot;: [&quot;beat&quot;, &quot;lane&quot;],
	    &quot;points&quot;: [
	        {&quot;vertex&quot;: [[0], 0]},
	        {&quot;vertex&quot;: [[1], 1]},
	        {&quot;vertex&quot;: [[2], 0]},
	        {&quot;vertex&quot;: [[3], 1]},
	        {&quot;vertex&quot;: [[4], 0]}
	    ]
	}
}
</code></pre>
<h2 id="invalid-examples"><a class="header" href="#invalid-examples">Invalid Examples</a></h2>
<h3 id="inconsistent-number-of-dimensions"><a class="header" href="#inconsistent-number-of-dimensions">Inconsistent number of dimensions</a></h3>
<pre><code class="language-json">{
	&quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;], // Points are 2 dimensional
	&quot;points&quot;: [
		{&quot;vertex&quot;: [3, 1], &quot;out&quot;: [5, 2, 3]}, // Out has 3 dimensions
		{&quot;vertex&quot;: [12, 5.2], &quot;in&quot;: [12.5, 8]}
	]
}
</code></pre>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;], // Points are 3 dimensional
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0, 0], &quot;out&quot;: [1, 1, 1]},
        {&quot;vertex&quot;: [2, 2], &quot;in&quot;: [1, 3], &quot;out&quot;: [3, 3]}, // all points are 2 dimensional
        {&quot;vertex&quot;: [4, 4, 4], &quot;in&quot;: [3, 5, 5]}
    ]
}
</code></pre>
<h3 id="missing-required-vertex-field"><a class="header" href="#missing-required-vertex-field">Missing required <code>vertex</code> field</a></h3>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;out&quot;: [1, 1]}, // missing vertex here
        {&quot;vertex&quot;: [2, 2], &quot;in&quot;: [1, 3], &quot;out&quot;: [3, 3]},
        {&quot;vertex&quot;: [4, 4], &quot;in&quot;: [3, 5]}
    ]
}
</code></pre>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0], &quot;out&quot;: [1, 1]},
        {&quot;in&quot;: [1, 3], &quot;out&quot;: [3, 3]}, // missing vertex here
        {&quot;vertex&quot;: [4, 2], &quot;in&quot;: [3, 1], &quot;out&quot;: [5, 1]},
        {&quot;vertex&quot;: [6, 0], &quot;in&quot;: [5, -1]}
    ]
}
</code></pre>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0, 0], &quot;out&quot;: [1, 1, 0.5]},
        {&quot;in&quot;: [1, 3, 0.7], &quot;out&quot;: [3, 3, 1.2]}, // missing vertex here
        {&quot;in&quot;: [3, 1, 0.8], &quot;out&quot;: [5, 1, 1.5]}, // missing vertex here
        {&quot;vertex&quot;: [6, 0, 0], &quot;in&quot;: [5, -1, 0.3]}
    ]
}
</code></pre>
<h3 id="invalid-data-types-for-coordinates"><a class="header" href="#invalid-data-types-for-coordinates">Invalid data types for coordinates</a></h3>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [&quot;0&quot;, 0], &quot;out&quot;: [1, 1]}, // vertex has a string
        {&quot;vertex&quot;: [2, 2], &quot;in&quot;: [1, 3], &quot;out&quot;: [3, 3]},
        {&quot;vertex&quot;: [4, &quot;4&quot;], &quot;in&quot;: [3, 5]} // vertex has a string
    ]
}
</code></pre>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0, 0], &quot;out&quot;: [{&quot;val&quot;: 3}, 1, 0.5]}, // out has an object
        {&quot;vertex&quot;: [2, 2, 1], &quot;in&quot;: [1, &quot;3&quot;, 0.7], &quot;out&quot;: [3, 3, 1.2]} // in has a string
    ]
}
</code></pre>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0], &quot;out&quot;: [1, &quot;1&quot;]}, // out has a string
        {&quot;vertex&quot;: [2, 2], &quot;in&quot;: [&quot;1&quot;, 3], &quot;out&quot;: [3, 3]} // in has a string
    ]
}
</code></pre>
<h3 id="less-than-two-cpgs"><a class="header" href="#less-than-two-cpgs">Less than two CPGs</a></h3>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0, 0], &quot;out&quot;: [1, 1, 0.5]}
    ]
}
</code></pre>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: [
        {&quot;vertex&quot;: [0, 0], &quot;out&quot;: [1, 1]}
    ]
}
</code></pre>
<pre><code class="language-json">{
    &quot;dimensions&quot;: [&quot;x&quot;, &quot;y&quot;],
    &quot;points&quot;: []
}
</code></pre>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>In summary, this Bézier curve specification offers a versatile solution for rhythm game designers to create intricate paths and shapes. With this specification, it becomes possible to create a wide variety of paths and visuals for the game, including zigzags, curves, and more. The usage of Bézier curves can contribute to a more engaging and dynamic player experience.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../concepts/fractions.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../concepts/fractions.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
